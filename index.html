<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒ½äº«åˆ¸ - ç²µæ¸¯æ¾³å¤§ç£å€æ¶ˆè²»å‡ºè¡Œä¸€åˆ¸é€š</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            /* æˆ°ç•¥åˆä½œä¸»é¡Œ */
            --bg-dark: #0b1121;       
            --sidebar-bg: #111827;    
            --card-bg: rgba(30, 41, 59, 0.9); 
            --border-color: #374151;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            
            --accent-blue: #3b82f6;   
            --accent-purple: #8b5cf6; 
            --accent-green: #10b981;  
            --accent-gold: #f59e0b;   
            --accent-red: #ef4444;    
        }

        body { 
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; 
            background-color: var(--bg-dark); 
            color: var(--text-primary);
            height: 100vh; 
            overflow: hidden; 
            display: flex;
        }

        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }

        /* ================= ç™»å…¥ç•«é¢ ================= */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1f2937 0%, #030712 100%);
            z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column;
            transition: opacity 0.5s ease;
        }
        .login-card-container { display: flex; gap: 40px; margin-top: 40px; }
        .login-option-card {
            width: 340px; background: rgba(31, 41, 55, 0.6); border: 1px solid var(--border-color);
            border-radius: 24px; padding: 40px 30px; text-align: center; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); backdrop-filter: blur(20px);
            position: relative; overflow: hidden;
        }
        .login-option-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple)); opacity: 0; transition: 0.3s;
        }
        .login-option-card:hover { transform: translateY(-8px); background: rgba(59, 130, 246, 0.1); border-color: var(--accent-blue); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .login-option-card:hover::before { opacity: 1; }
        .login-icon { font-size: 3.5rem; margin-bottom: 25px; color: var(--text-secondary); transition: 0.3s; }
        .login-option-card:hover .login-icon { color: var(--accent-blue); transform: scale(1.1); }
        
        .co-brand-footer {
            margin-top: 60px; text-align: center; font-size: 0.75rem; color: var(--text-secondary);
            opacity: 0.8; letter-spacing: 0.5px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;
        }
        .co-brand-logo { display: inline-flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 1rem; color: #fff;}
        
        /* ================= ä¸»æ‡‰ç”¨ ================= */
        #app-container { display: none; width: 100%; height: 100%; display: flex; opacity: 0; transition: opacity 0.5s ease; }

        .sidebar { width: 280px; background-color: var(--sidebar-bg); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; padding: 1.5rem; z-index: 1000; box-shadow: 5px 0 30px rgba(0,0,0,0.3); }
        .app-brand { font-size: 1.2rem; font-weight: 700; margin-bottom: 2.5rem; color: #fff; display: flex; align-items: center; gap: 10px; }
        .nav-item { padding: 12px 15px; margin-bottom: 8px; border-radius: 12px; cursor: pointer; color: var(--text-secondary); transition: all 0.2s; display: flex; align-items: center; font-weight: 500; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .nav-item.active { background: linear-gradient(90deg, rgba(59, 130, 246, 0.15), transparent); color: #fff; border-left: 3px solid var(--accent-blue); }
        .nav-item-secret { margin-top: 20px; color: var(--accent-purple); border: 1px dashed rgba(139, 92, 246, 0.3); }
        .nav-item-secret:hover { background: rgba(139, 92, 246, 0.1); color: #fff; border-color: var(--accent-purple); }

        .main-content { flex-grow: 1; padding: 25px; display: flex; flex-direction: column; position: relative; background: radial-gradient(circle at top right, #1f2937 0%, #030712 60%); }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; height: 40px; }
        .tech-badges { display: flex; gap: 10px; }
        .tech-badge { font-size: 0.75rem; padding: 4px 12px; border-radius: 20px; background: rgba(255,255,255,0.05); border: 1px solid var(--border-color); display: flex; align-items: center; gap: 6px; color: var(--text-secondary); }
        .tech-badge.active { border-color: var(--accent-green); color: var(--accent-green); box-shadow: 0 0 10px rgba(16, 185, 129, 0.1); }

        /* Dashboard çµ„ä»¶ */
        .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px; height: 120px; }
        .kpi-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px; display: flex; flex-direction: column; justify-content: center; backdrop-filter: blur(10px); position: relative; overflow: hidden; }
        .kpi-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--accent-color); }
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; grid-template-rows: minmax(0, 1fr) 240px; gap: 20px; flex-grow: 1; min-height: 0; }
        .panel { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; display: flex; flex-direction: column; overflow: hidden; backdrop-filter: blur(10px); }
        .panel-head { padding: 15px 20px; border-bottom: 1px solid var(--border-color); font-weight: 600; display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.02); }
        .panel-body { flex-grow: 1; position: relative; padding: 0; overflow: hidden; }

        /* ================= å‡ç´šç‰ˆç§˜å¯†æ¨¡æ…‹æ¡† (Digital Showroom) ================= */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            z-index: 2000; display: none; justify-content: center; align-items: center;
        }
        .secret-modal {
            width: 1000px; height: 80vh; background: #111827; border: 1px solid var(--accent-purple);
            border-radius: 20px; overflow: hidden; display: flex; flex-direction: column;
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.3); transform: scale(0.9); transition: 0.3s;
        }
        
        .secret-lock-container { text-align: center; color: white; padding: 50px; }
        
        .doc-layout { display: flex; height: 100%; }
        .doc-sidebar { width: 250px; background: #1f2937; border-right: 1px solid #374151; padding: 20px; }
        .doc-nav-item { padding: 10px; margin-bottom: 5px; color: #9ca3af; cursor: pointer; border-radius: 8px; font-size: 0.9rem; }
        .doc-nav-item:hover, .doc-nav-item.active { background: rgba(139, 92, 246, 0.2); color: #fff; }
        
        .doc-content { flex-grow: 1; padding: 0; overflow: hidden; position: relative; background: #030712; }
        
        /* æ»¾å‹•è¦–åœ– (Rolling View) */
        .rolling-container {
            height: 100%; overflow-y: auto; padding: 40px; scroll-behavior: smooth;
        }
        /* è‡ªå‹•æ»¾å‹•å‹•ç•« */
        .auto-scroll { animation: scrollUp 60s linear infinite; }
        .auto-scroll:hover { animation-play-state: paused; }
        
        @keyframes scrollUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-200%); } /* Adjust based on content length */
        }

        /* å¹»ç‡ˆç‰‡å¡ç‰‡æ¨£å¼ */
        .ppt-slide {
            background: white; color: #333; padding: 40px; margin-bottom: 40px;
            border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative; overflow: hidden;
        }
        .ppt-slide::before { content: 'INTERNAL DOCUMENT'; position: absolute; top: 20px; right: 20px; font-size: 0.7rem; color: #999; border: 1px solid #ddd; padding: 2px 5px; }
        
        /* æ”¿åºœç´…é ­æ–‡ä»¶æ¨£å¼ */
        .gov-doc {
            background: #fff; color: #000; padding: 40px; font-family: 'Songti SC', serif;
            border: 1px solid #ddd; position: relative; margin-bottom: 30px;
        }
        .gov-header { color: #d63031; font-size: 1.5rem; font-weight: bold; text-align: center; border-bottom: 2px solid #d63031; padding-bottom: 10px; margin-bottom: 20px; }
        .gov-title { font-size: 1.2rem; font-weight: bold; text-align: center; margin-bottom: 20px; }
        
        /* è­‰æ›¸æ¨£å¼ */
        .cert-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .cert-card {
            background: linear-gradient(135deg, #fff, #f0f0f0); border: 4px solid #d4af37;
            padding: 20px; text-align: center; border-radius: 8px; color: #333; position: relative;
        }
        .cert-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 10px; color: #b8860b; }
        .cert-badge { font-size: 3rem; color: #d4af37; margin-bottom: 10px; }

        /* ================= SVG åœ°åœ– ================= */
        #map-container { width: 100%; height: 100%; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle at center, #111827 0%, #020617 100%); }
        .svg-map { width: 100%; height: 100%; transition: opacity 0.5s ease-in-out; position: absolute; top:0; left:0; opacity: 0; pointer-events: none;}
        .active-map { opacity: 1; pointer-events: auto; z-index: 10;}
        .map-land { fill: #1e293b; stroke: #3b82f6; stroke-width: 0.8; transition: all 0.3s; }
        .map-land:hover { fill: #263c59; stroke: #60a5fa; }
        .map-land-mo { fill: #1e293b; stroke: #f59e0b; stroke-width: 1.5; filter: drop-shadow(0 0 5px rgba(245, 158, 11, 0.3)); } 
        .map-land-hp { fill: #1e293b; stroke: #10b981; stroke-width: 1.2; filter: drop-shadow(0 0 5px rgba(16, 185, 129, 0.2)); }
        
        .live-pulse { position: absolute; transform: translate(-50%, -50%); pointer-events: none; z-index: 20; }
        .live-pulse .core { width: 6px; height: 6px; background: #fff; border-radius: 50%; position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); }
        .live-pulse .ripple { position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); border: 2px solid var(--c); border-radius: 50%; animation: ripple 1.5s ease-out forwards; }
        @keyframes ripple { 0% { width:0; height:0; opacity:1; } 100% { width:80px; height:80px; opacity:0; } }

        /* å…¶ä»– */
        .table-dark-custom { width: 100%; margin: 0; font-size: 0.85rem; color: var(--text-secondary); }
        .table-dark-custom th { padding: 12px; border-bottom: 1px solid var(--border-color); text-align: left; }
        .table-dark-custom td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); color: var(--text-primary); }
        .feed-item { display: flex; justify-content: space-between; padding: 10px 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.85rem; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .view-section { display: none; height: 100%; flex-direction: column; }
        .view-section.active { display: flex; }
        .mode-switch-btn { margin-right: 15px; font-weight: bold; letter-spacing: 1px; color: #fff; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; cursor: pointer; transition: 0.3s; }
        .mode-switch-btn:hover { background: rgba(255,255,255,0.1); }
        .mode-switch-btn.active { background: var(--accent-blue); border-color: var(--accent-blue); }
    </style>
</head>
<body>

<!-- 1. ç™»å…¥å¼•å°é  -->
<div id="login-screen">
    <div class="text-center mb-5">
        <h1 class="display-3 fw-bold text-white mb-2"><i class="fas fa-ticket-alt text-primary me-3"></i>éƒ½äº«åˆ¸</h1>
        <p class="text-secondary fs-5">å¤§ç£å€æ¶ˆè²»å‡ºè¡Œä¸€åˆ¸é€š Â· æ•¸å­—åŒ–é‹ç‡Ÿä¸­æ¨</p>
    </div>

    <div class="login-card-container">
        <!-- æ¨¡å¼ A -->
        <div class="login-option-card" onclick="startApp('huangpu')">
            <div class="login-icon"><i class="fas fa-map-location-dot"></i></div>
            <h4 class="text-white fw-bold mb-3">å»£å·å¸‚é»ƒåŸ”å€ç¤ºç¯„</h4>
            <div class="text-secondary small">å€åŸŸé‹ç‡Ÿæ¨¡å¼ (Regional)<br>è¦†è“‹ç§‘å­¸åŸã€å¤§æ²™åœ°å•†åœˆ</div>
        </div>
        <!-- æ¨¡å¼ B -->
        <div class="login-option-card" onclick="startApp('gba')">
            <div class="login-icon"><i class="fas fa-globe-asia"></i></div>
            <h4 class="text-white fw-bold mb-3">ç²µæ¸¯æ¾³æ“´å±•ç¤ºç¯„</h4>
            <div class="text-secondary small">æˆ°ç•¥ç¸½éƒ¨æ¨¡å¼ (Strategic)<br>è¦†è“‹å»£å·ã€é¦™æ¸¯ã€æ¾³é–€</div>
        </div>
    </div>
    
    <div class="co-brand-footer">
        <div class="co-brand-logo">
            <i class="fas fa-cubes text-primary"></i> <span>å»£æ±å“å•Ÿé›²éˆ</span>
            <span class="mx-3 text-secondary">|</span>
            <i class="fas fa-network-wired text-purple"></i> <span>é¦™æ¸¯èŸ»ç±³é›†åœ˜</span>
        </div>
        <div class="mt-2">@2025 å»£æ±å“å•Ÿé›²éˆç§‘æŠ€æœ‰é™å…¬å¸ï¼Œ é¦™æ¸¯èŸ»ç±³é›†åœ˜åœ‹éš›æœ‰é™å…¬å¸</div>
        <div class="mt-1 small text-muted">Powered by YIMI Blockchain & YIMI AI</div>
    </div>
</div>

<!-- 2. ä¸»æ‡‰ç”¨ç•Œé¢ -->
<div id="app-container">
    <div class="sidebar">
        <div class="app-brand"><i class="fas fa-cubes text-primary me-2"></i> å“å•Ÿé›²éˆ Â· éƒ½äº«åˆ¸</div>
        <div class="nav-item active" onclick="switchView('ops')"><i class="fas fa-chart-pie"></i> é‹ç‡Ÿé§•é§›è‰™</div>
        <div class="nav-item" onclick="switchView('fin')"><i class="fas fa-coins"></i> è³‡é‡‘èˆ‡ç‡Ÿæ”¶</div>
        <div class="nav-item" onclick="switchView('app')"><i class="fas fa-mobile-screen"></i> ç”¨æˆ¶ç«¯é«”é©—</div>
        <div class="nav-item" id="nav-item-gba" onclick="switchView('gba')"><i class="fas fa-bridge"></i> ç²µæ¸¯æ¾³æ‹“å±•</div>
        
        <div class="nav-item nav-item-secret" onclick="openSecretModal()">
            <i class="fas fa-lock"></i> é …ç›®å…¬å¸
        </div>

        <div class="mt-auto">
            <div class="nav-item text-danger border border-danger border-opacity-25 justify-content-center mt-3" onclick="goHome()">
                <i class="fas fa-power-off me-2"></i> é€€å‡ºç³»çµ±
            </div>
            <div class="mt-4 pt-3 border-top border-secondary border-opacity-25 text-center">
                <div class="small text-white opacity-75">@2025 å»£æ±å“å•Ÿé›²éˆç§‘æŠ€æœ‰é™å…¬å¸</div>
                <div class="small text-white opacity-75">é¦™æ¸¯èŸ»ç±³é›†åœ˜åœ‹éš›æœ‰é™å…¬å¸</div>
                <div class="small text-secondary mt-1" style="font-size: 0.65rem;">Powered by YIMI Blockchain & YIMI AI</div>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <div class="d-flex align-items-center">
                <div id="mode-indicator" class="me-3 badge bg-dark border border-secondary text-secondary p-2">
                    <i class="fas fa-server me-1"></i> <span id="env-label-top">åˆå§‹åŒ–...</span>
                </div>
                <h5 class="m-0 fw-bold text-white" id="page-title">åŠ è¼‰ä¸­...</h5>
            </div>
            <div class="d-flex align-items-center gap-4">
                <div class="tech-badges">
                    <div class="tech-badge active"><i class="fas fa-link"></i> èŸ»ç±³éˆç¯€é»æ­£å¸¸</div>
                    <div class="tech-badge active"><i class="fas fa-robot"></i> DeepSeek AI é‹ç®—ä¸­</div>
                </div>
                <div class="text-secondary small d-flex align-items-center gap-2"><div class="status-dot"></div> <span id="clock">00:00:00</span></div>
            </div>
        </div>

        <!-- è¦–åœ– 1: é‹ç‡Ÿç›£æ§ -->
        <div id="view-ops" class="view-section active">
            <div class="d-flex justify-content-end mb-3">
                <div class="btn-group bg-dark rounded-pill border border-secondary p-1">
                    <button class="btn btn-sm rounded-pill text-white px-3" id="btn-mode-gba" onclick="switchMode('gba')">å¤§ç£å€å…¨è¦½</button>
                    <button class="btn btn-sm rounded-pill text-white px-3" id="btn-mode-hp" onclick="switchMode('huangpu')">é»ƒåŸ”å€å°ˆé …</button>
                </div>
            </div>

            <div class="kpi-row">
                <div class="kpi-card" style="--accent-color: var(--accent-blue)"><div class="kpi-label" id="lbl-merchant">åˆä½œå•†å®¶</div><div class="kpi-value" id="val-merchants">2,150</div><div class="kpi-sub"><span id="sub-merchant">è¦†è“‹ç‡ 85%</span> <span class="trend-up">+5.2%</span></div></div>
                <div class="kpi-card" style="--accent-color: var(--accent-green)"><div class="kpi-label">ä»Šæ—¥æ ¸éŠ·æµæ°´</div><div class="kpi-value text-success" id="val-gmv">1,452,000</div><div class="kpi-sub"><span>æ—¥ç’°æ¯” +12.5%</span> <span class="trend-up"><i class="fas fa-bolt"></i> Live</span></div></div>
                <div class="kpi-card" style="--accent-color: var(--accent-gold)"><div class="kpi-label">æ´»èºç”¨æˆ¶</div><div class="kpi-value text-warning">158,400</div><div class="kpi-sub"><span>è½‰åŒ–ç‡ 32%</span></div></div>
                <div class="kpi-card" style="--accent-color: var(--accent-red)"><div class="kpi-label">é¢¨æ§é è­¦</div><div class="kpi-value text-danger">3 <small class="fs-6">å®¶</small></div><div class="kpi-sub"><span>éœ€äººå·¥ä»‹å…¥</span></div></div>
            </div>

            <div class="dashboard-grid">
                <div class="panel" style="grid-row: 1 / span 2; grid-column: 1;">
                    <div class="panel-head"><span><i class="fas fa-map-marked-alt text-primary me-2"></i>å¯¦æ™‚äº¤æ˜“ç†±åŠ›åˆ†ä½ˆ</span><div class="btn-group btn-group-sm opacity-50" id="map-controls"></div></div>
                    <div class="panel-body">
                        <div id="map-container">
                            <svg style="position: absolute; width:100%; height:100%; pointer-events: none; opacity: 0.1;"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="#fff" stroke-width="0.5"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" /></svg>

                            <!-- åœ°åœ–A: å¤§ç£å€ (å«æ¾³é–€å¢å¼·) -->
                            <svg class="svg-map" id="gba-svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
                                <path id="region-mainland" class="map-land" d="M0,0 L800,0 L800,250 L750,260 L700,240 L650,280 L600,350 L500,320 L480,280 L450,250 L400,280 L350,250 L300,300 L250,350 L200,320 L100,350 L0,300 Z" />
                                <path id="region-zh-mo" class="map-land-mo" d="M250,380 L320,380 L350,420 L340,480 L300,520 L280,550 L200,500 L150,450 Z" />
                                <path id="region-hk" class="map-land" d="M620,380 L720,360 L780,400 L750,480 L680,500 L640,450 Z" />
                                <line x1="450" y1="280" x2="680" y2="420" stroke="#3b82f6" stroke-width="1" stroke-dasharray="5,5" opacity="0.6"/>
                                <line x1="450" y1="280" x2="300" y2="480" stroke="#f59e0b" stroke-width="1" stroke-dasharray="5,5" opacity="0.6"/>
                                <line x1="680" y1="420" x2="300" y2="480" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="5,5" opacity="0.4"/>
                                <circle cx="450" cy="280" r="4" fill="#3b82f6" /> <text x="460" y="275" fill="#fff" font-size="10">å»£å·ç¸½éƒ¨</text>
                                <circle cx="680" cy="420" r="4" fill="#8b5cf6" /> <text x="690" y="415" fill="#fff" font-size="10">é¦™æ¸¯</text>
                                <circle cx="300" cy="480" r="5" fill="#f59e0b" stroke="#fff" stroke-width="1" /> 
                                <text x="290" y="470" fill="#f59e0b" font-size="11" font-weight="bold" text-anchor="end">æ¾³é–€Â·å¤§ä¸‰å·´</text>
                                <text x="290" y="500" fill="#f59e0b" font-size="10" text-anchor="end">å¨å°¼æ–¯äºº</text>
                            </svg>

                            <!-- åœ°åœ–B: é»ƒåŸ”å€ -->
                            <svg class="svg-map" id="huangpu-svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
                                <path class="map-land-hp" d="M250,150 L550,120 L650,250 L600,350 L200,300 Z" fill="#1e293b" />
                                <path class="map-land-hp" d="M220,320 L580,360 L620,450 L300,480 Z" fill="#1e293b" />
                                <path class="map-land-hp" d="M350,500 L500,490 L550,550 L380,580 Z" fill="#1e293b" />
                                <text x="400" y="220" fill="#10b981" font-size="14" text-anchor="middle" opacity="0.8">ç§‘å­¸åŸ</text>
                                <text x="450" y="530" fill="#f59e0b" font-size="14" text-anchor="middle" opacity="0.8">é•·æ´²å³¶æ–‡æ—…</text>
                            </svg>
                            <div id="map-overlay" style="position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none;"></div>
                        </div>
                    </div>
                </div>
                <div class="panel" style="grid-row: 1; grid-column: 2;">
                    <div class="panel-head"><span><i class="fas fa-list text-warning me-2"></i>å¯¦æ™‚äº¤æ˜“ä¸Šéˆ</span></div>
                    <div class="panel-body" style="overflow-y: auto;"><div id="feed-list" class="p-0"></div></div>
                </div>
                <div class="panel" style="grid-row: 2; grid-column: 2;">
                    <div class="panel-head"><span><i class="fas fa-shield-halved text-danger me-2"></i>ç•°å¸¸ç›£æ§</span></div>
                    <div class="panel-body p-3">
                        <div class="d-flex align-items-center justify-content-between mb-2"><span class="text-white">é»ƒåŸ”äººå®¶(å¤§æ²™åœ°)</span> <span class="badge bg-warning">æ ¸éŠ·ç‡ç•°å¸¸</span></div>
                        <div class="d-flex align-items-center justify-content-between"><span class="text-white">ç‰¹è‰²ç§å»š(ç§‘å­¸åŸ)</span> <span class="badge bg-danger">ç¶“ç‡Ÿå‡çµ</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¦–åœ– 2: è³‡é‡‘ç‡Ÿæ”¶ -->
        <div id="view-fin" class="view-section">
            <div class="dashboard-grid" style="grid-template-rows: 1fr 1fr;">
                <div class="panel" style="grid-column: 1;">
                    <div class="panel-head"><span><i class="fas fa-sliders text-success me-2"></i>å•†æ¥­æ¨¡å¼åˆ©æ½¤æ¨¡æ“¬å™¨</span></div>
                    <div class="panel-body d-flex p-4">
                        <div style="flex:1">
                            <label class="d-flex justify-content-between mb-2"><span>é›†æ¡æŠ˜æ‰£</span> <span class="badge bg-primary" id="lbl-cost">85æŠ˜</span></label>
                            <input type="range" class="range-slider mb-4" min="80" max="95" value="85" id="slider-cost" oninput="updateSim()">
                            <label class="d-flex justify-content-between mb-2"><span>ç”¨æˆ¶æŠ˜æ‰£</span> <span class="badge bg-success" id="lbl-price">88æŠ˜</span></label>
                            <input type="range" class="range-slider" min="85" max="98" value="88" id="slider-price" oninput="updateSim()">
                            <div class="alert alert-dark border-secondary mt-4 mb-0 d-flex justify-content-between"><span>æ¯›åˆ©:</span><span class="fw-bold text-warning" id="res-spread">3.0%</span></div>
                        </div>
                        <div style="flex:1; padding-left: 30px;"><canvas id="profitChart"></canvas></div>
                    </div>
                </div>
                <div class="panel" style="grid-column: 2;">
                    <div class="panel-head"><span><i class="fas fa-chart-pie text-info me-2"></i>ç‡Ÿæ”¶æ§‹æˆ</span></div>
                    <div class="panel-body p-3"><canvas id="revenuePieChart"></canvas></div>
                </div>
                <div class="panel" style="grid-column: 1 / span 2; grid-row: 2;">
                    <div class="panel-head"><span><i class="fas fa-table text-secondary me-2"></i>å¹´åº¦è²¡å‹™è©³è¡¨ (åŸºæ–¼3.6å„„å¹´æµæ°´é æ¸¬)</span></div>
                    <div class="panel-body p-0"><table class="table-dark-custom text-center"><tbody id="finance-tbody"></tbody></table></div>
                </div>
            </div>
        </div>

        <!-- è¦–åœ– 3: ç”¨æˆ¶ç«¯é«”é©— -->
        <div id="view-app" class="view-section">
            <div class="mobile-demo-container">
                <div class="phone-frame">
                    <div class="phone-notch"></div>
                    <div class="phone-screen">
                        <div style="padding: 20px; border-bottom: 1px solid #eee; background: #fff;"><strong>éƒ½äº«åŒ¯éŒ¢åŒ…</strong></div>
                        <div style="margin: 15px; padding: 20px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: #fff; border-radius: 15px;">
                            <div class="d-flex justify-content-between"><span>éƒ½äº«é€šé‡‘å¡</span><span>å·²æ¿€æ´»</span></div>
                            <h2 class="mt-3">88æŠ˜</h2>
                        </div>
                        <div style="padding: 20px; text-align: center;">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=Demo" style="opacity: 0.8;">
                            <button class="btn btn-primary w-100 mt-3 rounded-pill" onclick="alert('æ”¯ä»˜æˆåŠŸï¼')">æ¨¡æ“¬æ”¯ä»˜</button>
                        </div>
                    </div>
                </div>
                <div class="phone-frame">
                    <div class="phone-notch"></div>
                    <div class="phone-screen" style="background: #f1f5f9;">
                        <div style="padding: 20px; background: #fff;"><strong>å•†å®¶åŠ©æ‰‹</strong></div>
                        <div style="padding: 20px;">
                            <div style="background: #fff; padding: 20px; border-radius: 10px; text-align: center; margin-bottom: 20px;">
                                <div class="text-secondary">ä»Šæ—¥å¯¦æ”¶</div>
                                <h2 class="text-dark">3,450.00</h2>
                            </div>
                            <div style="background: #10b981; color: #fff; padding: 15px; border-radius: 50px; text-align: center;">æƒç¢¼æ ¸éŠ·</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¦–åœ– 4: ç²µæ¸¯æ¾³æ‹“å±• -->
        <div id="view-gba" class="view-section">
            <div class="kpi-row">
                <div class="kpi-card" style="--accent-color: var(--accent-purple)"><div class="kpi-label">é¦™æ¸¯ç›®æ¨™å•†å®¶</div><div class="kpi-value">500</div></div>
                <div class="kpi-card" style="--accent-color: var(--accent-purple)"><div class="kpi-label">æ¾³é–€ç›®æ¨™å•†å®¶</div><div class="kpi-value">200</div></div>
                <div class="kpi-card" style="--accent-color: var(--accent-blue)"><div class="kpi-label">è·¨å¢ƒç”¨æˆ¶</div><div class="kpi-value text-info">150,000</div></div>
                <div class="kpi-card" style="--accent-color: var(--accent-green)"><div class="kpi-label">å¤šå¹£ç¨®çµç®—</div><div class="kpi-value text-success">CNY/HKD</div></div>
            </div>
            <div class="dashboard-grid">
                <div class="panel"><div class="panel-head">æ‹“å±•è·¯ç·šåœ–</div><div class="panel-body p-4 text-white">
                    <p class="mb-3"><span class="badge bg-primary me-2">Phase 1</span> å»£å·æ·±è€•æœŸ (85% å®Œæˆ)</p>
                    <p class="mb-3"><span class="badge bg-purple me-2">Phase 2</span> æ·±æ¸¯äº’é€šæœŸ (ç±Œå‚™ä¸­)</p>
                    <p><span class="badge bg-secondary me-2">Phase 3</span> å¤§ç£å€å…¨è¦†è“‹ (è¦åŠƒä¸­)</p>
                </div></div>
                <div class="panel"><div class="panel-head">è·¨å¢ƒå¢é•·</div><div class="panel-body p-3"><canvas id="gbaChart"></canvas></div></div>
            </div>
        </div>

    </div>
</div>

<!-- 3. æ©Ÿå¯†æ–‡æª”æ¨¡æ…‹æ¡† (é …ç›®å…¬å¸) -->
<div class="modal-overlay" id="secret-modal">
    <div class="secret-modal">
        <!-- å¯†ç¢¼é– -->
        <div id="secret-lock" class="secret-lock-container">
            <i class="fas fa-lock fa-4x text-secondary mb-4"></i>
            <h3 class="text-white mb-3">æ©Ÿå¯†æ–‡æª” Â· è¨ªå•æ§åˆ¶</h3>
            <input type="password" id="secret-input" class="form-control text-center mb-3 bg-dark text-white border-secondary mx-auto" style="width: 200px; font-size: 1.5rem;" placeholder="****" maxlength="4">
            <button class="btn btn-primary px-5" onclick="checkSecret()">è§£é–</button>
            <div class="mt-3"><button class="btn btn-link text-secondary" onclick="closeSecretModal()">å–æ¶ˆ</button></div>
        </div>
        
        <!-- è§£é–å¾Œå…§å®¹å€ -->
        <div id="secret-content" style="display:none; height:100%; flex-direction:column;">
            <div class="secret-header bg-dark">
                <h5 class="text-warning m-0 fw-bold"><i class="fas fa-folder-open me-2"></i>é …ç›®å…¬å¸æ•¸æ“šåº«</h5>
                <button class="btn btn-sm btn-outline-secondary" onclick="closeSecretModal()">é—œé–‰</button>
            </div>
            
            <div class="doc-layout">
                <div class="doc-sidebar">
                    <div class="doc-nav-item active" onclick="showDocTab('ppt')"><i class="fas fa-file-powerpoint me-2"></i>é …ç›®æ¼”ç¤º (PPT)</div>
                    <div class="doc-nav-item" onclick="showDocTab('cert')"><i class="fas fa-certificate me-2"></i>ä¼æ¥­æ¦®è­½</div>
                    <div class="doc-nav-item" onclick="showDocTab('contract')"><i class="fas fa-file-contract me-2"></i>æˆ°ç•¥å”è­°</div>
                </div>
                
                <div class="doc-content">
                    <!-- Tab 1: PPT Rolling -->
                    <div id="tab-ppt" class="rolling-container">
                        <div class="ppt-slide">
                            <h2 class="text-primary border-bottom pb-2">éƒ½äº«åˆ¸ï¼šåŸºæ–¼æ•¸å­—åŒ–çš„é›»å­è¯åˆ¸æŠ€è¡“å‰µæ–°</h2>
                            <p class="mt-3"><strong>å‰µå§‹äººï¼š</strong>å¼µéŒ¦å–œ &nbsp;|&nbsp; <strong>æ—¥æœŸï¼š</strong>2025å¹´12æœˆ</p>
                            <p><strong>æ ¸å¿ƒç†å¿µï¼š</strong>ä¸€ç¢¼é€šäº«åŸå¸‚ç”Ÿæ´»å„ªæƒ ï¼Œæ§‹å»ºå…¨åŸŸæ–‡å•†é«”æ—…ç¶œåˆæœå‹™å¹³è‡ºã€‚</p>
                        </div>
                        <div class="ppt-slide">
                            <h4 class="text-dark">é›™å¹³è‡ºæ¨¡å¼</h4>
                            <div class="row mt-4">
                                <div class="col-6 p-3 bg-light border rounded">
                                    <h5 class="text-primary">éƒ½äº«åŒ¯ (å…¬å…±æœå‹™)</h5>
                                    <small>å®šä½ï¼šåŸå¸‚æ–‡åŒ–æ´»å‹•æ‰“å¡ã€å…¨åŸŸæ•¸å­—åœ°åœ–ã€‚<br>åŠŸèƒ½ï¼šå¼•æµåˆ°åœ°ï¼Œè¨˜éŒ„è¡Œè·¡ã€‚</small>
                                </div>
                                <div class="col-6 p-3 bg-light border rounded">
                                    <h5 class="text-success">éƒ½äº«åˆ¸ (å•†æ¥­é‹ç‡Ÿ)</h5>
                                    <small>å®šä½ï¼šé¤é£²é›¶å”®æ¶ˆè²»è¯åˆ¸ã€‚<br>åŠŸèƒ½ï¼šå¼•æµåˆ°åº—ï¼Œå‰µé€ ç¾é‡‘æµã€‚</small>
                                </div>
                            </div>
                        </div>
                        <div class="ppt-slide">
                            <h4 class="text-dark">å…­ä½ä¸€é«”æ•¸å­—æŠ€è¡“</h4>
                            <ul class="list-group list-group-flush mt-3 small">
                                <li class="list-group-item">1. è¯åˆé«”åœ–è­œ (æ§‹å»ºåˆ©ç›Šå…±åŒé«”)</li>
                                <li class="list-group-item">2. æ•¸æ“šåŒ–é€šåˆ¸ (æ»¿æ¸›è¯åˆ¸ï¼Œå€åŸŸé€šç”¨)</li>
                                <li class="list-group-item">3. æ•¸å­—åŒ–è¯å¡ (ç¾é£Ÿéƒ½äº«åˆ¸)</li>
                                <li class="list-group-item">4. AIæ™ºæ…§æœå‹™ (DeepSeekäººå·¥æ™ºèƒ½)</li>
                                <li class="list-group-item">5. AIæ•¸å­—äºº (å•†åœˆIP)</li>
                                <li class="list-group-item">6. æ²‰æµ¸å¼éŠè³¼ (ARæŠ€è¡“)</li>
                            </ul>
                        </div>
                        <div class="ppt-slide">
                            <h4 class="text-dark">é—œæ–¼èŸ»ç±³æ§è‚¡</h4>
                            <p class="small">èŸ»ç±³æ§è‚¡æ˜¯é›†ã€Œæ•™+å‰µ+å­µ+æŠ•ã€æ–¼ä¸€é«”çš„åƒ¹å€¼å‰µæ–°å‹é›†åœ˜ã€‚æ——ä¸‹ç®¡ç†ç§å‹Ÿè‚¡æ¬ŠæŠ•è³‡åŸºé‡‘è¦æ¨¡17å„„äººæ°‘å¹£ã€‚å·²æŠ•è³‡æ¡ˆä¾‹åŒ…æ‹¬ï¼š</p>
                            <div class="d-flex gap-2 flex-wrap mt-2">
                                <span class="badge bg-secondary">ç§»å¡ (09923.HK)</span>
                                <span class="badge bg-secondary">å‚‘å‰µæ™ºèƒ½ (301248.SZ)</span>
                                <span class="badge bg-secondary">å®æ™¯ç§‘æŠ€ (301396.SZ)</span>
                                <span class="badge bg-secondary">å¿…è²ç‰¹ (688759)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 2: Certificates -->
                    <div id="tab-cert" class="rolling-container" style="display:none;">
                        <div class="cert-grid">
                            <div class="cert-card">
                                <div class="cert-badge"><i class="fas fa-award"></i></div>
                                <div class="cert-title">é«˜æ–°æŠ€è¡“ä¼æ¥­</div>
                                <small>åœ‹å®¶ç´šèªè­‰ Â· è­‰æ›¸ç·¨è™Ÿ GR2023...</small>
                            </div>
                            <div class="cert-card">
                                <div class="cert-badge"><i class="fas fa-medal"></i></div>
                                <div class="cert-title">å°ˆç²¾ç‰¹æ–°ä¸­å°ä¼æ¥­</div>
                                <small>å»£æ±çœå·¥æ¥­å’Œä¿¡æ¯åŒ–å»³é ’ç™¼</small>
                            </div>
                            <div class="cert-card">
                                <div class="cert-badge"><i class="fas fa-lightbulb"></i></div>
                                <div class="cert-title">ç™¼æ˜å°ˆåˆ©</div>
                                <h3 class="text-dark">71é …</h3>
                                <small>å·²æˆæ¬Š 36 é …</small>
                            </div>
                            <div class="cert-card">
                                <div class="cert-badge"><i class="fas fa-code"></i></div>
                                <div class="cert-title">è»Ÿä»¶è‘—ä½œæ¬Š</div>
                                <h3 class="text-dark">64é …</h3>
                                <small>è‡ªä¸»çŸ¥è­˜ç”¢æ¬Š</small>
                            </div>
                        </div>
                        
                        <!-- æ¨¡æ“¬ç´…é ­æ–‡ä»¶ -->
                        <div class="gov-doc mt-4">
                            <div class="gov-header">å»£å·é–‹ç™¼å€å•†å‹™å±€æ–‡ä»¶</div>
                            <div class="text-end small mb-4">ç©—é–‹å•†å‹™å‡½ã€”2025ã€•6è™Ÿ</div>
                            <div class="gov-title">é—œæ–¼å°ç™¼ã€Š2025 é»ƒåŸ”å‡ºå½©ç”Ÿæ´»å­£æ´»å‹•å·¥ä½œæ–¹æ¡ˆã€‹çš„é€šçŸ¥</div>
                            <p class="small" style="text-indent: 2em;">å„æœ‰é—œå–®ä½ï¼šç‚ºé€²ä¸€æ­¥ææŒ¯æ¶ˆè²»ï¼Œæ¨å‹•å…¨å€å•†æ¥­é«˜è³ªé‡ç™¼å±•ï¼Œç¶“ç ”ç©¶åŒæ„ï¼Œç¾å°‡å·¥ä½œæ–¹æ¡ˆå°ç™¼çµ¦ä½ å€‘ï¼Œè«‹èªçœŸçµ„ç¹”å¯¦æ–½ã€‚æ”¯æŒå“å•Ÿé›²éˆç­‰ä¼æ¥­åˆ©ç”¨æ•¸å­—åŒ–æ‰‹æ®µæ‰“é€ æ¶ˆè²»æ–°å ´æ™¯...</p>
                        </div>
                    </div>

                    <!-- Tab 3: Contract -->
                    <div id="tab-contract" class="rolling-container" style="display:none; padding: 30px;">
                        <h5 class="text-warning mb-3">æˆ°ç•¥åˆä½œæ¡†æ¶å”è­°</h5>
                        <div class="p-3 bg-dark border border-secondary rounded mb-3">
                            <p class="mb-1 text-white"><strong>ç”²æ–¹ï¼š</strong>å»£æ±å“å•Ÿé›²éˆç§‘æŠ€æœ‰é™å…¬å¸ (å¼µéŒ¦å–œ)</p>
                            <p class="mb-0 text-white"><strong>ä¹™æ–¹ï¼š</strong>èŸ»ç±³é›†åœ˜(åœ‹éš›)æœ‰é™å…¬å¸ (æ—æ¯…)</p>
                        </div>
                        <ul class="text-secondary small">
                            <li class="mb-2"><strong>åˆä½œå®—æ—¨ï¼š</strong>é›™æ–¹åœ¨å»£å·è¨­ç«‹åˆè³‡å…¬å¸ï¼Œæ§‹å»ºå¤§ç£å€æƒ æ°‘å‡ºè¡Œæ¶ˆè²»å¹³è‡ºã€‚å¾å»£å·åšèµ·ï¼Œæ¨å‹•ã€Œéƒ½äº«åˆ¸ã€å‘ç ä¸‰è§’åŠé¦™æ¸¯æ“´å¼µã€‚</li>
                            <li class="mb-2"><strong>æ¬Šåˆ©ç¾©å‹™ï¼š</strong>ç”²æ–¹è² è²¬å¹³è‡ºæ­å»ºã€ç³»çµ±é–‹ç™¼èˆ‡ç¶­è­·ï¼›ä¹™æ–¹è² è²¬å¼•å…¥è³‡é‡‘ï¼Œæ¨å‹•é¦™æ¸¯é‹ç‡ŸåŠç‡ŸéŠ·æ¨å»£ã€‚</li>
                            <li class="mb-2"><strong>æœŸé™ï¼š</strong>10å¹´ (2025å¹´11æœˆç°½ç½²)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    let currentMode = 'gba';
    let feedInterval;

    function startApp(mode) {
        currentMode = mode;
        document.getElementById('login-screen').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app-container').style.display = 'flex';
            setTimeout(() => { document.getElementById('app-container').style.opacity = '1'; }, 10);
            updateTime();
            switchMode(mode);
            setTimeout(initCharts, 100);
        }, 500);
    }

    function goHome() {
        clearInterval(feedInterval);
        document.getElementById('app-container').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('app-container').style.display = 'none';
            document.getElementById('login-screen').style.display = 'flex';
            setTimeout(() => { document.getElementById('login-screen').style.opacity = '1'; }, 10);
            switchView('ops');
        }, 500);
    }

    function switchMode(mode) {
        currentMode = mode;
        const title = document.getElementById('page-title');
        const envTop = document.getElementById('env-label-top');
        const navGba = document.getElementById('nav-item-gba');
        
        document.getElementById('btn-mode-gba').classList.toggle('active', mode === 'gba');
        document.getElementById('btn-mode-gba').classList.toggle('btn-primary', mode === 'gba');
        document.getElementById('btn-mode-gba').classList.toggle('btn-outline-secondary', mode !== 'gba');
        
        document.getElementById('btn-mode-hp').classList.toggle('active', mode === 'huangpu');
        document.getElementById('btn-mode-hp').classList.toggle('btn-primary', mode === 'huangpu');
        document.getElementById('btn-mode-hp').classList.toggle('btn-outline-secondary', mode !== 'huangpu');

        if(mode === 'huangpu') {
            title.innerText = "å»£å·å¸‚é»ƒåŸ”å€æ•¸å­—åŒ–é‹ç‡Ÿä¸­å¿ƒ";
            envTop.innerText = "ç’°å¢ƒ: é»ƒåŸ”æœ¬åœ°ç¯€é»";
            navGba.style.display = 'none';
            document.getElementById('lbl-merchant').innerText = "é»ƒåŸ”å…¥é§å•†å®¶";
            document.getElementById('gba-svg').classList.remove('active-map');
            document.getElementById('huangpu-svg').classList.add('active-map');
        } else {
            title.innerText = "ç²µæ¸¯æ¾³å¤§ç£å€æ•¸å­—åŒ–é‹ç‡Ÿé§•é§›è‰™";
            envTop.innerText = "ç’°å¢ƒ: å¤§ç£å€æ ¸å¿ƒç¯€é»";
            navGba.style.display = 'flex';
            document.getElementById('lbl-merchant').innerText = "å¤§ç£å€åˆä½œå•†å®¶";
            document.getElementById('huangpu-svg').classList.remove('active-map');
            document.getElementById('gba-svg').classList.add('active-map');
        }
        startLiveFeed();
    }

    function switchView(id) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const nav = document.querySelector(`.nav-item[onclick*="'${id}'"]`);
        if(nav) nav.classList.add('active');
    }

    // --- æ©Ÿå¯†æ–‡æª”é‚è¼¯ ---
    function openSecretModal() {
        document.getElementById('secret-modal').style.display = 'flex';
        document.getElementById('secret-lock').style.display = 'block';
        document.getElementById('secret-content').style.display = 'none';
        document.getElementById('secret-input').value = '';
    }
    function closeSecretModal() { document.getElementById('secret-modal').style.display = 'none'; }
    function checkSecret() {
        if(document.getElementById('secret-input').value === '8888') {
            document.getElementById('secret-lock').style.display = 'none';
            document.getElementById('secret-content').style.display = 'flex';
            showDocTab('ppt');
        } else { alert('å¯†ç¢¼éŒ¯èª¤ï¼'); }
    }
    function showDocTab(tabId) {
        ['ppt','cert','contract'].forEach(id => document.getElementById('tab-'+id).style.display = 'none');
        document.getElementById('tab-'+tabId).style.display = 'block';
        document.querySelectorAll('.doc-nav-item').forEach(el => el.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    // --- å¯¦æ™‚æ•¸æ“š ---
    const hpLocs = ["é»ƒåŸ”Â·ç§‘å­¸åŸè¬é”", "é»ƒåŸ”Â·å¤§æ²™åœ°æ±", "é»ƒåŸ”Â·é•·æ´²å³¶è¾²èŠ", "é»ƒåŸ”Â·é­šç ç¢¼é ­"];
    const gbaLocs = [
        "å»£å·Â·å¤©æ²³åŸ", "å»£å·Â·åŒ—äº¬è·¯", "é¦™æ¸¯Â·éŠ…é‘¼ç£", "é¦™æ¸¯Â·å°–æ²™å’€", 
        "æ¾³é–€Â·å¤§ä¸‰å·´", "æ¾³é–€Â·å¨å°¼æ–¯äºº", "æ¾³é–€Â·å®˜ä¹Ÿè¡—", "ç æµ·Â·æ‹±åŒ—å£å²¸"
    ];
    const geo = {
        huangpu: { x: [350, 450], y: [200, 300], c: '#10b981' },
        gba_gz: { x: [400, 500], y: [250, 350], c: '#3b82f6' },
        gba_hk: { x: [640, 720], y: [380, 460], c: '#8b5cf6' },
        gba_mo: { x: [280, 320], y: [460, 500], c: '#f59e0b' }
    };

    function spawnPulse(type) {
        const container = document.getElementById('map-overlay');
        let range;
        if (currentMode === 'huangpu') range = geo.huangpu;
        else {
            if (type.includes('æ¾³é–€')) range = geo.gba_mo;
            else if (type.includes('é¦™æ¸¯')) range = geo.gba_hk;
            else range = geo.gba_gz;
        }
        const x = range.x[0] + Math.random() * (range.x[1] - range.x[0]);
        const y = range.y[0] + Math.random() * (range.y[1] - range.y[0]);
        const pulse = document.createElement('div');
        pulse.className = 'live-pulse';
        pulse.style.left = (x/800*100) + '%';
        pulse.style.top = (y/600*100) + '%';
        pulse.style.setProperty('--c', range.c);
        pulse.innerHTML = `<div class="core"></div><div class="ripple"></div>`;
        container.appendChild(pulse);
        setTimeout(() => pulse.remove(), 2000);
    }

    function startLiveFeed() {
        if(feedInterval) clearInterval(feedInterval);
        const list = document.getElementById('feed-list');
        const dashGmv = document.getElementById('val-gmv');
        let total = 1452000;

        feedInterval = setInterval(() => {
            let pool = currentMode === 'huangpu' ? hpLocs : gbaLocs;
            const target = pool[Math.floor(Math.random() * pool.length)];
            const act = Math.random() > 0.4 ? "æ ¸éŠ·" : "å……å€¼";
            const amt = Math.floor(Math.random() * 800) + 50;
            
            const row = document.createElement('div');
            row.className = "feed-item";
            let colorClass = act === 'æ ¸éŠ·' ? 'text-warning' : 'text-success';
            let locDisplay = target;
            if (target.includes('æ¾³é–€')) locDisplay = `<span class="text-warning">ğŸ‡²ğŸ‡´ ${target}</span>`;
            else if (target.includes('é¦™æ¸¯')) locDisplay = `<span class="text-purple">ğŸ‡­ğŸ‡° ${target}</span>`;
            
            row.innerHTML = `<span class="text-secondary">${new Date().toLocaleTimeString()} ${locDisplay}</span><span class="${colorClass}">${act} Â¥${amt}</span>`;
            list.prepend(row);
            if(list.children.length > 8) list.lastElementChild.remove();

            if (act === "æ ¸éŠ·") { total += amt; dashGmv.innerText = total.toLocaleString(); }
            spawnPulse(target);
        }, 500);
    }

    // --- åœ–è¡¨é‚è¼¯ ---
    function updateSim() {
        const c = parseInt(document.getElementById('slider-cost').value);
        const p = parseInt(document.getElementById('slider-price').value);
        document.getElementById('lbl-cost').innerText = c + "æŠ˜";
        document.getElementById('lbl-price').innerText = p + "æŠ˜";
        document.getElementById('res-spread').innerText = (p-c) + ".0%";
        
        const m = (p-c)/100;
        const net = [48,60,90].map((g,i) => (g*m - [1,1.2,1.5][i]).toFixed(2));
        
        if(profitChart) { profitChart.data.datasets[0].data = net; profitChart.update(); }
        
        let html = '';
        ['2025','2026','2027'].forEach((y,i) => {
             html += `<tr><td>${y}</td><td>${[10,20,30][i]}è¬</td><td>${[3.6,7.2,10.8][i]}å„„</td><td>${([3.6,7.2,10.8][i]*m).toFixed(2)}å„„</td><td class="text-success">${net[i]}å„„</td></tr>`;
        });
        document.getElementById('finance-tbody').innerHTML = html;
    }

    function initCharts() {
        Chart.defaults.color = '#94a3b8'; Chart.defaults.borderColor = '#334155';
        
        profitChart = new Chart(document.getElementById('profitChart').getContext('2d'), {
            type: 'bar', 
            data: { labels: ['2025','2026','2027'], datasets: [{ label: 'é ä¼°æ·¨åˆ©', data: [], backgroundColor: '#10b981', borderRadius: 4 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });
        
        new Chart(document.getElementById('revenuePieChart'), { 
            type: 'doughnut', 
            data: { labels: ['äº¤æ˜“å·®åƒ¹','å»£å‘Š','æ•¸æ“š'], datasets: [{ data: [70,20,10], backgroundColor: ['#3b82f6','#8b5cf6','#f59e0b'], borderWidth: 0 }] }, 
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } } 
        });
        
        new Chart(document.getElementById('gbaChart'), { 
            type: 'line', 
            data: { labels: ['Q1','Q2','Q3','Q4'], datasets: [{ label: 'å»£å·', data: [10,25,45,60], borderColor: '#3b82f6' }, { label: 'é¦™æ¸¯', data: [0,5,12,20], borderColor: '#8b5cf6' }] }, 
            options: { responsive: true, maintainAspectRatio: false } 
        });
        updateSim();
    }

    function updateTime() { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); setTimeout(updateTime, 1000); }
</script>
</body>
</html>
