<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒ½äº«åˆ¸ - ç²µæ¸¯æ¾³å¤§ç£å€æ¶ˆè²»å‡ºè¡Œä¸€åˆ¸é€š</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            /* æˆ°ç•¥åˆä½œä¸»é¡Œ - æ·±é‚ƒè—ç´« */
            --bg-dark: #0b1121;       
            --sidebar-bg: #111827;    
            --card-bg: rgba(30, 41, 59, 0.85); 
            --border-color: #374151;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            
            --accent-blue: #3b82f6;   /* å“å•Ÿç§‘æŠ€è— */
            --accent-purple: #8b5cf6; /* èŸ»ç±³æˆ°ç•¥ç´« */
            --accent-green: #10b981;  /* è³‡é‡‘/æ ¸éŠ· */
            --accent-gold: #f59e0b;   /* æ¾³é–€/VIP */
            --accent-red: #ef4444;    /* é¢¨æ§ */
        }

        body { 
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; 
            background-color: var(--bg-dark); 
            color: var(--text-primary);
            height: 100vh; 
            overflow: hidden; 
            display: flex;
        }

        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }

        /* ================= ç™»å…¥ç•«é¢ ================= */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1f2937 0%, #030712 100%);
            z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column;
            transition: opacity 0.5s ease;
        }
        .login-card-container { display: flex; gap: 40px; margin-top: 40px; }
        .login-option-card {
            width: 340px; background: rgba(31, 41, 55, 0.6); border: 1px solid var(--border-color);
            border-radius: 24px; padding: 40px 30px; text-align: center; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); backdrop-filter: blur(20px);
            position: relative; overflow: hidden;
        }
        .login-option-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple)); opacity: 0; transition: 0.3s;
        }
        .login-option-card:hover { transform: translateY(-8px); background: rgba(59, 130, 246, 0.1); border-color: var(--accent-blue); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .login-option-card:hover::before { opacity: 1; }
        
        .login-icon { font-size: 3.5rem; margin-bottom: 25px; color: var(--text-secondary); transition: 0.3s; }
        .login-option-card:hover .login-icon { color: var(--accent-blue); transform: scale(1.1); }
        
        /* è¯åˆå“ç‰Œæ¨™è­˜ */
        .co-brand-footer {
            margin-top: 60px; text-align: center; font-size: 0.75rem; color: var(--text-secondary);
            opacity: 0.8; letter-spacing: 0.5px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;
        }
        .co-brand-logo { display: inline-flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 1rem; color: #fff;}
        
        /* ================= ä¸»æ‡‰ç”¨ ================= */
        #app-container { display: none; width: 100%; height: 100%; display: flex; opacity: 0; transition: opacity 0.5s ease; }

        .sidebar { width: 280px; background-color: var(--sidebar-bg); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; padding: 1.5rem; z-index: 1000; box-shadow: 5px 0 30px rgba(0,0,0,0.3); }
        .app-brand { font-size: 1.2rem; font-weight: 700; margin-bottom: 2.5rem; color: #fff; display: flex; align-items: center; gap: 10px; }
        
        .nav-item { padding: 12px 15px; margin-bottom: 8px; border-radius: 12px; cursor: pointer; color: var(--text-secondary); transition: all 0.2s; display: flex; align-items: center; font-weight: 500; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .nav-item.active { background: linear-gradient(90deg, rgba(59, 130, 246, 0.15), transparent); color: #fff; border-left: 3px solid var(--accent-blue); }
        .nav-item i { width: 30px; text-align: center; margin-right: 8px; font-size: 1.1rem; }
        
        .nav-item-secret { margin-top: 20px; color: var(--accent-purple); border: 1px dashed rgba(139, 92, 246, 0.3); }
        .nav-item-secret:hover { background: rgba(139, 92, 246, 0.1); color: #fff; border-color: var(--accent-purple); }

        .main-content { flex-grow: 1; padding: 25px; display: flex; flex-direction: column; position: relative; background: radial-gradient(circle at top right, #1f2937 0%, #030712 60%); }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; height: 40px; }
        .tech-badges { display: flex; gap: 10px; }
        .tech-badge { font-size: 0.75rem; padding: 4px 12px; border-radius: 20px; background: rgba(255,255,255,0.05); border: 1px solid var(--border-color); display: flex; align-items: center; gap: 6px; color: var(--text-secondary); }
        .tech-badge.active { border-color: var(--accent-green); color: var(--accent-green); box-shadow: 0 0 10px rgba(16, 185, 129, 0.1); }

        .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px; height: 120px; }
        .kpi-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px; display: flex; flex-direction: column; justify-content: center; backdrop-filter: blur(10px); position: relative; overflow: hidden; }
        .kpi-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--accent-color); }
        
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; grid-template-rows: minmax(0, 1fr) 240px; gap: 20px; flex-grow: 1; min-height: 0; }
        .panel { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 16px; display: flex; flex-direction: column; overflow: hidden; backdrop-filter: blur(10px); }
        .panel-head { padding: 15px 20px; border-bottom: 1px solid var(--border-color); font-weight: 600; display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.02); }
        .panel-body { flex-grow: 1; position: relative; padding: 0; overflow: hidden; }

        /* ================= ç§˜å¯†æ¨¡æ…‹æ¡† ================= */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
            z-index: 2000; display: none; justify-content: center; align-items: center;
        }
        .secret-modal {
            width: 600px; background: #1f2937; border: 1px solid var(--accent-purple);
            border-radius: 20px; padding: 0; overflow: hidden;
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.2);
            transform: scale(0.9); transition: 0.3s; display: flex; flex-direction: column;
        }
        .secret-header { background: rgba(139, 92, 246, 0.1); padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .secret-body { padding: 30px; max-height: 60vh; overflow-y: auto; text-align: left; }
        
        /* ================= SVG åœ°åœ– ================= */
        #map-container { width: 100%; height: 100%; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle at center, #111827 0%, #020617 100%); }
        .svg-map { width: 100%; height: 100%; transition: opacity 0.5s ease-in-out; position: absolute; top:0; left:0; opacity: 0; pointer-events: none;}
        
        /* åœ°åœ–æ¿€æ´»ç‹€æ…‹ */
        .active-map { opacity: 1; pointer-events: auto; z-index: 10;}

        .map-land { fill: #1e293b; stroke: #3b82f6; stroke-width: 0.8; transition: all 0.3s; }
        .map-land:hover { fill: #263c59; stroke: #60a5fa; }
        
        /* æ¾³é–€ç‰¹å¯« */
        .map-land-mo { fill: #1e293b; stroke: #f59e0b; stroke-width: 1.5; filter: drop-shadow(0 0 5px rgba(245, 158, 11, 0.3)); } 
        
        /* é»ƒåŸ”ç‰¹å¯« */
        .map-land-hp { fill: #1e293b; stroke: #10b981; stroke-width: 1.2; filter: drop-shadow(0 0 5px rgba(16, 185, 129, 0.2)); }
        
        .live-pulse { position: absolute; transform: translate(-50%, -50%); pointer-events: none; z-index: 20; }
        .live-pulse .core { width: 6px; height: 6px; background: #fff; border-radius: 50%; position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); }
        .live-pulse .ripple { position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); border: 2px solid var(--c); border-radius: 50%; animation: ripple 1.5s ease-out forwards; }
        @keyframes ripple { 0% { width:0; height:0; opacity:1; } 100% { width:80px; height:80px; opacity:0; } }

        /* è¡¨æ ¼èˆ‡åˆ—è¡¨ */
        .table-dark-custom { width: 100%; margin: 0; font-size: 0.85rem; color: var(--text-secondary); }
        .table-dark-custom th { padding: 12px; border-bottom: 1px solid var(--border-color); text-align: left; }
        .table-dark-custom td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); color: var(--text-primary); }
        
        .feed-item { display: flex; justify-content: space-between; padding: 10px 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.85rem; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .view-section { display: none; height: 100%; flex-direction: column; }
        .view-section.active { display: flex; }
        
        /* æ¨¡å¼åˆ‡æ›æŒ‰éˆ• */
        .mode-switch-btn { margin-right: 15px; font-weight: bold; letter-spacing: 1px; color: #fff; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; cursor: pointer; transition: 0.3s; }
        .mode-switch-btn:hover { background: rgba(255,255,255,0.1); }
        .mode-switch-btn.active { background: var(--accent-blue); border-color: var(--accent-blue); }
    </style>
</head>
<body>

<!-- 1. ç™»å…¥å¼•å°é  -->
<div id="login-screen">
    <div class="text-center mb-5">
        <h1 class="display-3 fw-bold text-white mb-2"><i class="fas fa-ticket-alt text-primary me-3"></i>éƒ½äº«åˆ¸</h1>
        <p class="text-secondary fs-5">å¤§ç£å€æ¶ˆè²»å‡ºè¡Œä¸€åˆ¸é€š Â· æ•¸å­—åŒ–é‹ç‡Ÿä¸­æ¨</p>
    </div>

    <div class="login-card-container">
        <!-- æ¨¡å¼ A -->
        <div class="login-option-card" onclick="startApp('huangpu')">
            <div class="login-icon"><i class="fas fa-map-location-dot"></i></div>
            <h4 class="text-white fw-bold mb-3">å»£å·å¸‚é»ƒåŸ”å€ç¤ºç¯„</h4>
            <div class="text-secondary small">
                å€åŸŸé‹ç‡Ÿæ¨¡å¼ (Regional)<br>
                è¦†è“‹ç§‘å­¸åŸã€å¤§æ²™åœ°å•†åœˆ<br>
                <span class="text-primary">é«˜é »é¤é£²èˆ‡æ–‡æ—…æ ¸éŠ·</span>
            </div>
        </div>

        <!-- æ¨¡å¼ B -->
        <div class="login-option-card" onclick="startApp('gba')">
            <div class="login-icon"><i class="fas fa-globe-asia"></i></div>
            <h4 class="text-white fw-bold mb-3">ç²µæ¸¯æ¾³æ“´å±•ç¤ºç¯„</h4>
            <div class="text-secondary small">
                æˆ°ç•¥ç¸½éƒ¨æ¨¡å¼ (Strategic)<br>
                è¦†è“‹å»£å·ã€é¦™æ¸¯ã€æ¾³é–€<br>
                <span class="text-purple">è·¨å¢ƒæ”¯ä»˜èˆ‡å¤šå¹£ç¨®æ¸…ç®—</span>
            </div>
        </div>
    </div>
    
    <div class="co-brand-footer">
        <div class="co-brand-logo">
            <i class="fas fa-cubes text-primary"></i> <span>å»£æ±å“å•Ÿé›²éˆ</span>
            <span class="mx-3 text-secondary">|</span>
            <i class="fas fa-network-wired text-purple"></i> <span>é¦™æ¸¯èŸ»ç±³é›†åœ˜</span>
        </div>
        <div class="mt-2">@2025 å»£æ±å“å•Ÿé›²éˆç§‘æŠ€æœ‰é™å…¬å¸ï¼Œ é¦™æ¸¯èŸ»ç±³é›†åœ˜åœ‹éš›æœ‰é™å…¬å¸</div>
        <div class="mt-1 small text-muted">Powered by YIMI Blockchain & YIMI AI</div>
    </div>
</div>

<!-- 2. ä¸»æ‡‰ç”¨ç•Œé¢ -->
<div id="app-container">
    <!-- å·¦å´å°èˆª -->
    <div class="sidebar">
        <div class="app-brand">
            <i class="fas fa-cubes text-primary me-2"></i> å“å•Ÿé›²éˆ Â· éƒ½äº«åˆ¸
        </div>
        
        <div class="nav-item active" onclick="switchView('ops')"><i class="fas fa-chart-pie"></i> é‹ç‡Ÿé§•é§›è‰™</div>
        <div class="nav-item" onclick="switchView('fin')"><i class="fas fa-coins"></i> è³‡é‡‘èˆ‡ç‡Ÿæ”¶</div>
        <div class="nav-item" onclick="switchView('app')"><i class="fas fa-mobile-screen"></i> ç”¨æˆ¶ç«¯é«”é©—</div>
        <div class="nav-item" id="nav-item-gba" onclick="switchView('gba')"><i class="fas fa-bridge"></i> ç²µæ¸¯æ¾³æ‹“å±•</div>
        
        <!-- ç§˜å¯†é€šé“ -->
        <div class="nav-item nav-item-secret" onclick="openSecretModal()">
            <i class="fas fa-lock"></i> é …ç›®å…¬å¸
        </div>

        <div class="mt-auto">
            <div class="nav-item text-danger border border-danger border-opacity-25 justify-content-center mt-3" onclick="goHome()">
                <i class="fas fa-power-off me-2"></i> é€€å‡ºç³»çµ±
            </div>
            <div class="mt-4 pt-3 border-top border-secondary border-opacity-25 text-center">
                <div class="small text-white opacity-75">@2025 å»£æ±å“å•Ÿé›²éˆç§‘æŠ€æœ‰é™å…¬å¸</div>
                <div class="small text-white opacity-75">é¦™æ¸¯èŸ»ç±³é›†åœ˜åœ‹éš›æœ‰é™å…¬å¸</div>
                <div class="small text-secondary mt-1" style="font-size: 0.65rem;">Powered by YIMI Blockchain & YIMI AI</div>
            </div>
        </div>
    </div>

    <!-- å³å´å…§å®¹ -->
    <div class="main-content">
        <!-- é ‚éƒ¨ -->
        <div class="header">
            <div class="d-flex align-items-center">
                <!-- æ¨¡å¼åˆ‡æ›æŒ‡ç¤ºå™¨ -->
                <div id="mode-indicator" class="me-3 badge bg-dark border border-secondary text-secondary p-2">
                    <i class="fas fa-server me-1"></i> <span id="env-label-top">åˆå§‹åŒ–...</span>
                </div>
                <h5 class="m-0 fw-bold text-white" id="page-title">åŠ è¼‰ä¸­...</h5>
            </div>
            <div class="d-flex align-items-center gap-4">
                <div class="tech-badges">
                    <div class="tech-badge active"><i class="fas fa-link"></i> èŸ»ç±³éˆç¯€é»æ­£å¸¸</div>
                    <div class="tech-badge active"><i class="fas fa-robot"></i> DeepSeek AI é‹ç®—ä¸­</div>
                </div>
                <div class="text-secondary small d-flex align-items-center gap-2">
                    <div class="status-dot"></div> <span id="clock">00:00:00</span>
                </div>
            </div>
        </div>

        <!-- è¦–åœ– 1: é‹ç‡Ÿç›£æ§ -->
        <div id="view-ops" class="view-section active">
            <!-- æ¨¡å¼åˆ‡æ›æŒ‰éˆ• (åœ¨é é¢å…§éƒ¨åˆ‡æ›) -->
            <div class="d-flex justify-content-end mb-3">
                <div class="btn-group bg-dark rounded-pill border border-secondary p-1">
                    <button class="btn btn-sm rounded-pill text-white px-3" id="btn-mode-gba" onclick="switchMode('gba')">å¤§ç£å€å…¨è¦½</button>
                    <button class="btn btn-sm rounded-pill text-white px-3" id="btn-mode-hp" onclick="switchMode('huangpu')">é»ƒåŸ”å€å°ˆé …</button>
                </div>
            </div>

            <div class="kpi-row">
                <div class="kpi-card" style="--accent-color: var(--accent-blue)">
                    <div class="kpi-label" id="lbl-merchant">åˆä½œå•†å®¶</div>
                    <div class="kpi-value" id="val-merchants">2,150</div>
                    <div class="kpi-sub"><span id="sub-merchant">æ ¸å¿ƒå•†åœˆè¦†è“‹ç‡ 85%</span> <span class="trend-up">+5.2%</span></div>
                </div>
                <div class="kpi-card" style="--accent-color: var(--accent-green)">
                    <div class="kpi-label">ä»Šæ—¥æ ¸éŠ·æµæ°´ (CNY)</div>
                    <div class="kpi-value text-success" id="val-gmv">1,452,000</div>
                    <div class="kpi-sub"><span>æ—¥ç’°æ¯” +12.5%</span> <span class="trend-up"><i class="fas fa-bolt"></i> Live</span></div>
                </div>
                <div class="kpi-card" style="--accent-color: var(--accent-gold)">
                    <div class="kpi-label">éƒ½äº«åŒ¯æ´»èºç”¨æˆ¶</div>
                    <div class="kpi-value text-warning">158,400</div>
                    <div class="kpi-sub"><span>æ‰“å¡è½‰åŒ–ç‡ 32%</span></div>
                </div>
                <div class="kpi-card" style="--accent-color: var(--accent-red)">
                    <div class="kpi-label">é¢¨æ§é è­¦</div>
                    <div class="kpi-value text-danger">3 <small class="fs-6">å®¶</small></div>
                    <div class="kpi-sub"><span>éœ€äººå·¥ä»‹å…¥</span></div>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- åœ°åœ– -->
                <div class="panel" style="grid-row: 1 / span 2; grid-column: 1;">
                    <div class="panel-head">
                        <span><i class="fas fa-map-marked-alt text-primary me-2"></i>å¯¦æ™‚äº¤æ˜“ç†±åŠ›åˆ†ä½ˆ</span>
                        <!-- åœ°åœ–å…§æ§éµ -->
                        <div class="btn-group btn-group-sm opacity-50" id="map-controls"></div>
                    </div>
                    <div class="panel-body">
                        <div id="map-container">
                            <svg style="position: absolute; width:100%; height:100%; pointer-events: none; opacity: 0.1;">
                                <defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="#fff" stroke-width="0.5"/></pattern></defs>
                                <rect width="100%" height="100%" fill="url(#grid)" />
                            </svg>

                            <!-- åœ°åœ–A: å¤§ç£å€ (å«æ¾³é–€å¢å¼·) -->
                            <svg class="svg-map" id="gba-svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
                                <!-- å¤§é™¸ -->
                                <path id="region-mainland" class="map-land" d="M0,0 L800,0 L800,250 L750,260 L700,240 L650,280 L600,350 L500,320 L480,280 L450,250 L400,280 L350,250 L300,300 L250,350 L200,320 L100,350 L0,300 Z" />
                                
                                <!-- ç æµ·/æ¾³é–€å€åŸŸ (æ¾³é–€é«˜äº®) -->
                                <path id="region-zh-mo" class="map-land-mo" d="M250,380 L320,380 L350,420 L340,480 L300,520 L280,550 L200,500 L150,450 Z" />
                                
                                <!-- é¦™æ¸¯ -->
                                <path id="region-hk" class="map-land" d="M620,380 L720,360 L780,400 L750,480 L680,500 L640,450 Z" />
                                
                                <!-- é€£æ¥ç·š -->
                                <line x1="450" y1="280" x2="680" y2="420" stroke="#3b82f6" stroke-width="1" stroke-dasharray="5,5" opacity="0.6"/>
                                <line x1="450" y1="280" x2="300" y2="480" stroke="#f59e0b" stroke-width="1" stroke-dasharray="5,5" opacity="0.6"/>
                                <line x1="680" y1="420" x2="300" y2="480" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="5,5" opacity="0.4"/>
                                
                                <!-- åœ°æ¨™é» -->
                                <circle cx="450" cy="280" r="4" fill="#3b82f6" /> <text x="460" y="275" fill="#fff" font-size="10">å»£å·ç¸½éƒ¨</text>
                                <circle cx="680" cy="420" r="4" fill="#8b5cf6" /> <text x="690" y="415" fill="#fff" font-size="10">é¦™æ¸¯</text>
                                
                                <!-- æ¾³é–€åœ°æ¨™ (é‡é») -->
                                <circle cx="300" cy="480" r="5" fill="#f59e0b" stroke="#fff" stroke-width="1" /> 
                                <text x="290" y="470" fill="#f59e0b" font-size="11" font-weight="bold" text-anchor="end">æ¾³é–€Â·å¤§ä¸‰å·´</text>
                                <text x="290" y="500" fill="#f59e0b" font-size="10" text-anchor="end">å¨å°¼æ–¯äºº</text>
                            </svg>

                            <!-- åœ°åœ–B: é»ƒåŸ”å€ -->
                            <svg class="svg-map" id="huangpu-svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
                                <path class="map-land-hp" d="M250,150 L550,120 L650,250 L600,350 L200,300 Z" fill="#1e293b" />
                                <path class="map-land-hp" d="M220,320 L580,360 L620,450 L300,480 Z" fill="#1e293b" />
                                <path class="map-land-hp" d="M350,500 L500,490 L550,550 L380,580 Z" fill="#1e293b" />
                                <text x="400" y="220" fill="#10b981" font-size="14" text-anchor="middle" opacity="0.8">ç§‘å­¸åŸ</text>
                                <text x="450" y="530" fill="#f59e0b" font-size="14" text-anchor="middle" opacity="0.8">é•·æ´²å³¶æ–‡æ—…</text>
                            </svg>

                            <div id="map-overlay" style="position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none;"></div>
                        </div>
                    </div>
                </div>

                <!-- äº¤æ˜“æ—¥èªŒ -->
                <div class="panel" style="grid-row: 1; grid-column: 2;">
                    <div class="panel-head"><span><i class="fas fa-list text-warning me-2"></i>å¯¦æ™‚äº¤æ˜“ä¸Šéˆ</span></div>
                    <div class="panel-body" style="overflow-y: auto;">
                        <div id="feed-list" class="p-0"></div>
                    </div>
                </div>

                <!-- é¢¨æ§ -->
                <div class="panel" style="grid-row: 2; grid-column: 2;">
                    <div class="panel-head"><span><i class="fas fa-shield-halved text-danger me-2"></i>ç•°å¸¸ç›£æ§</span></div>
                    <div class="panel-body p-3">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <span class="text-white">é»ƒåŸ”äººå®¶(å¤§æ²™åœ°)</span> <span class="badge bg-warning">æ ¸éŠ·ç‡ç•°å¸¸</span>
                        </div>
                        <div class="d-flex align-items-center justify-content-between">
                            <span class="text-white">ç‰¹è‰²ç§å»š(ç§‘å­¸åŸ)</span> <span class="badge bg-danger">ç¶“ç‡Ÿå‡çµ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¦–åœ– 2, 3, 4 -->
        <div id="view-fin" class="view-section">
            <div class="panel h-100 d-flex justify-content-center align-items-center">
                <h3 class="text-secondary">è²¡å‹™èˆ‡ç‡Ÿæ”¶æ¨¡å‹ (å·²åŠ è¼‰ 10 å„„æŠ•è³‡è¨ˆåŠƒ)</h3>
            </div>
        </div>
        <div id="view-app" class="view-section">
            <div class="panel h-100 d-flex justify-content-center align-items-center">
                <h3 class="text-secondary">ç”¨æˆ¶ç«¯é›™æ©Ÿæ¼”ç¤º (æº–å‚™å°±ç·’)</h3>
            </div>
        </div>
        <div id="view-gba" class="view-section">
            <div class="panel h-100 d-flex justify-content-center align-items-center">
                <h3 class="text-secondary">ç²µæ¸¯æ¾³æ“´å±•è·¯ç·šåœ– (Phase 1-3)</h3>
            </div>
        </div>

    </div>
</div>

<!-- 3. ç§˜å¯†æ¨¡æ…‹æ¡† (é …ç›®å…¬å¸) -->
<div class="modal-overlay" id="secret-modal">
    <div class="secret-modal">
        <div id="secret-lock">
            <i class="fas fa-lock fa-3x text-secondary mb-3"></i>
            <h4 class="text-white mb-3">å…§éƒ¨æ–‡ä»¶ Â· è«‹è¼¸å…¥è¨ªå•å¯†ç¢¼</h4>
            <input type="password" id="secret-input" class="form-control text-center mb-3 bg-dark text-white border-secondary" placeholder="****" maxlength="4">
            <button class="btn btn-primary w-100" onclick="checkSecret()">é©—è­‰èº«ä»½</button>
            <button class="btn btn-link text-secondary mt-2" onclick="closeSecretModal()">å–æ¶ˆ</button>
        </div>
        
        <div id="secret-content" class="secret-content">
            <div class="secret-header">
                <h5 class="text-warning m-0 fw-bold"><i class="fas fa-file-contract me-2"></i>æˆ°ç•¥åˆä½œæ¡†æ¶å”è­°</h5>
                <button class="btn btn-sm btn-close btn-close-white" onclick="closeSecretModal()"></button>
            </div>
            <div class="secret-body">
                <div class="mb-3 p-3 rounded" style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid var(--accent-blue);">
                    <div class="row">
                        <div class="col-6">
                            <small class="text-secondary d-block">ç”²æ–¹</small>
                            <strong class="text-white">å»£æ±å“å•Ÿé›²éˆç§‘æŠ€æœ‰é™å…¬å¸</strong>
                            <div class="small text-secondary">æ³•äºº: å¼µéŒ¦å–œ</div>
                        </div>
                        <div class="col-6">
                            <small class="text-secondary d-block">ä¹™æ–¹</small>
                            <strong class="text-white">èŸ»ç±³é›†åœ˜(åœ‹éš›)æœ‰é™å…¬å¸</strong>
                            <div class="small text-secondary">æ³•äºº: æ—æ¯…</div>
                        </div>
                    </div>
                </div>

                <h6 class="text-primary mt-4 mb-2"><i class="fas fa-bullseye me-2"></i>åˆä½œå®—æ—¨</h6>
                <p class="text-secondary small">
                    é›™æ–¹åœ¨å»£å·è¨­ç«‹åˆè³‡å…¬å¸ï¼Œæ§‹å»ºä¸€å€‹å¤§ç£å€æƒ æ°‘å‡ºè¡Œæ¶ˆè²»å¹³è‡ºã€‚
                    å¾å»£å·åšèµ·ï¼Œæ¨å‹•ã€Œéƒ½äº«åˆ¸ã€å‘ç ä¸‰è§’åŠé¦™æ¸¯æ“´å¼µï¼Œæ‰“é€ åŸºæ–¼å€å¡ŠéˆæŠ€è¡“çš„å•†æ¥­æµé‡è®Šç¾ç”Ÿæ…‹ã€‚
                </p>

                <h6 class="text-purple mt-4 mb-2"><i class="fas fa-balance-scale me-2"></i>æ¬Šåˆ©èˆ‡ç¾©å‹™</h6>
                <ul class="text-secondary small ps-3">
                    <li class="mb-1"><strong>ç”²æ–¹ (å“å•Ÿ)ï¼š</strong>è² è²¬æ­å»ºå¹³è‡ºã€ç³»çµ±é–‹ç™¼ã€æŠ€è¡“ç¶­è­·ï¼Œç¢ºä¿åœè»Šåˆ¸èˆ‡å„ªæƒ åˆ¸åŠŸèƒ½ï¼Œåš´æ ¼ä¿è­·æ•¸æ“šå®‰å…¨ã€‚</li>
                    <li class="mb-1"><strong>ä¹™æ–¹ (èŸ»ç±³)ï¼š</strong>è² è²¬å¼•å…¥æŠ•è³‡è³‡é‡‘ï¼Œæ¨å‹•é¦™æ¸¯é‹ç‡Ÿï¼Œçµ„ç¹”å•†å®¶å¤§æœƒï¼Œé€²è¡Œç‡ŸéŠ·æ¨å»£èˆ‡è½åœ°ã€‚</li>
                </ul>

                <h6 class="text-success mt-4 mb-2"><i class="fas fa-clock me-2"></i>åˆä½œæœŸé™</h6>
                <p class="text-secondary small">10å¹´ (2025å¹´11æœˆç°½ç½²)</p>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    let currentMode = 'gba';
    let feedInterval;

    // --- å•Ÿå‹• ---
    function startApp(mode) {
        currentMode = mode;
        document.getElementById('login-screen').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app-container').style.display = 'flex';
            setTimeout(() => { document.getElementById('app-container').style.opacity = '1'; }, 10);
            updateTime();
            switchMode(mode); // ä½¿ç”¨çµ±ä¸€çš„åˆ‡æ›é‚è¼¯
        }, 500);
    }

    function goHome() {
        clearInterval(feedInterval);
        document.getElementById('app-container').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('app-container').style.display = 'none';
            document.getElementById('login-screen').style.display = 'flex';
            setTimeout(() => { document.getElementById('login-screen').style.opacity = '1'; }, 10);
            switchView('ops');
        }, 500);
    }

    // --- æ¨¡å¼åˆ‡æ›é‚è¼¯ (å…¨é‡åˆ‡æ›) ---
    function switchMode(mode) {
        currentMode = mode;
        
        // UI æ›´æ–°
        const title = document.getElementById('page-title');
        const envTop = document.getElementById('env-label-top');
        const navGba = document.getElementById('nav-item-gba');
        
        // æŒ‰éˆ•ç‹€æ…‹
        document.getElementById('btn-mode-gba').classList.toggle('active', mode === 'gba');
        document.getElementById('btn-mode-gba').classList.toggle('btn-primary', mode === 'gba');
        document.getElementById('btn-mode-gba').classList.toggle('btn-outline-secondary', mode !== 'gba');
        
        document.getElementById('btn-mode-hp').classList.toggle('active', mode === 'huangpu');
        document.getElementById('btn-mode-hp').classList.toggle('btn-primary', mode === 'huangpu');
        document.getElementById('btn-mode-hp').classList.toggle('btn-outline-secondary', mode !== 'huangpu');

        if(mode === 'huangpu') {
            title.innerText = "å»£å·å¸‚é»ƒåŸ”å€æ•¸å­—åŒ–é‹ç‡Ÿä¸­å¿ƒ";
            envTop.innerText = "ç’°å¢ƒ: é»ƒåŸ”æœ¬åœ°ç¯€é»";
            navGba.style.display = 'none';
            document.getElementById('lbl-merchant').innerText = "é»ƒåŸ”å…¥é§å•†å®¶";
            
            // åœ°åœ–åˆ‡æ›
            document.getElementById('gba-svg').classList.remove('active-map');
            document.getElementById('huangpu-svg').classList.add('active-map');
        } else {
            title.innerText = "ç²µæ¸¯æ¾³å¤§ç£å€æ•¸å­—åŒ–é‹ç‡Ÿé§•é§›è‰™";
            envTop.innerText = "ç’°å¢ƒ: å¤§ç£å€æ ¸å¿ƒç¯€é»";
            navGba.style.display = 'flex';
            document.getElementById('lbl-merchant').innerText = "å¤§ç£å€åˆä½œå•†å®¶";
            
            // åœ°åœ–åˆ‡æ›
            document.getElementById('huangpu-svg').classList.remove('active-map');
            document.getElementById('gba-svg').classList.add('active-map');
        }
        
        // é‡å•Ÿæ•¸æ“šæµ
        startLiveFeed();
    }

    function switchView(id) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const nav = document.querySelector(`.nav-item[onclick*="'${id}'"]`);
        if(nav) nav.classList.add('active');
    }

    // --- ç§˜å¯†æ¨¡æ…‹æ¡†é‚è¼¯ ---
    function openSecretModal() {
        document.getElementById('secret-modal').style.display = 'flex';
        document.getElementById('secret-lock').style.display = 'block';
        document.getElementById('secret-content').style.display = 'none';
        document.getElementById('secret-input').value = '';
    }
    function closeSecretModal() {
        document.getElementById('secret-modal').style.display = 'none';
    }
    function checkSecret() {
        const val = document.getElementById('secret-input').value;
        if(val === '8888') {
            document.getElementById('secret-lock').style.display = 'none';
            document.getElementById('secret-content').style.display = 'block';
        } else {
            alert('å¯†ç¢¼éŒ¯èª¤ï¼');
        }
    }

    // --- å¯¦æ™‚ç†±é»èˆ‡æ—¥èªŒ (å¤§é‡ Sample æ•¸æ“š) ---
    // Sample æ•¸æ“šåº«
    const hpLocs = [
        "é»ƒåŸ”Â·ç§‘å­¸åŸè¬é”", "é»ƒåŸ”Â·å¤§æ²™åœ°æ±", "é»ƒåŸ”Â·é•·æ´²å³¶è¾²èŠ", "é»ƒåŸ”Â·é­šç ç¢¼é ­", 
        "é»ƒåŸ”Â·è˜¿å´—å¥§åœ’", "é»ƒåŸ”Â·å—æµ·ç¥å»Ÿ", "é»ƒåŸ”Â·è‡³æ³°å»£å ´", "é»ƒåŸ”Â·å¯¶èƒ½æ¼”è—ä¸­å¿ƒ"
    ];
    const gbaLocs = [
        "å»£å·Â·å¤©æ²³åŸ", "å»£å·Â·åŒ—äº¬è·¯", "å»£å·Â·ç æ±Ÿæ–°åŸ", "å»£å·Â·æ°¸æ…¶åŠ",
        "é¦™æ¸¯Â·éŠ…é‘¼ç£", "é¦™æ¸¯Â·å°–æ²™å’€", "é¦™æ¸¯Â·æ—ºè§’æœ—è±ªåŠ", "é¦™æ¸¯Â·æµ·æ¸¯åŸ",
        "æ¾³é–€Â·å¤§ä¸‰å·´", "æ¾³é–€Â·å¨å°¼æ–¯äºº", "æ¾³é–€Â·å®˜ä¹Ÿè¡—", "æ¾³é–€Â·æ–°è‘¡äº¬",
        "ç æµ·Â·æ‹±åŒ—å£å²¸", "æ·±åœ³Â·è¬è±¡å¤©åœ°", "ä½›å±±Â·å¶ºå—å¤©åœ°"
    ];
    // åº§æ¨™ç¯„åœ
    const geo = {
        huangpu: { x: [350, 450], y: [200, 300], c: '#10b981' },
        gba_gz: { x: [400, 500], y: [250, 350], c: '#3b82f6' }, // å»£å·
        gba_hk: { x: [640, 720], y: [380, 460], c: '#8b5cf6' }, // é¦™æ¸¯
        gba_mo: { x: [280, 320], y: [460, 500], c: '#f59e0b' }  // æ¾³é–€ (ä¿®æ­£åæ¨™)
    };

    function spawnPulse(type) {
        const container = document.getElementById('map-overlay');
        let range;
        
        if (currentMode === 'huangpu') {
            range = geo.huangpu;
        } else {
            if (type.includes('æ¾³é–€')) range = geo.gba_mo;
            else if (type.includes('é¦™æ¸¯')) range = geo.gba_hk;
            else range = geo.gba_gz;
        }
        
        const x = range.x[0] + Math.random() * (range.x[1] - range.x[0]);
        const y = range.y[0] + Math.random() * (range.y[1] - range.y[0]);
        
        const pulse = document.createElement('div');
        pulse.className = 'live-pulse';
        pulse.style.left = (x/800*100) + '%';
        pulse.style.top = (y/600*100) + '%';
        pulse.style.setProperty('--c', range.c);
        pulse.innerHTML = `<div class="core"></div><div class="ripple"></div>`;
        container.appendChild(pulse);
        setTimeout(() => pulse.remove(), 2000);
    }

    function startLiveFeed() {
        if(feedInterval) clearInterval(feedInterval);
        const list = document.getElementById('feed-list');
        const dashGmv = document.getElementById('val-gmv');
        let total = 1452000;

        feedInterval = setInterval(() => {
            let pool = currentMode === 'huangpu' ? hpLocs : gbaLocs;
            const target = pool[Math.floor(Math.random() * pool.length)];
            const act = Math.random() > 0.4 ? "æ ¸éŠ·" : (Math.random() > 0.5 ? "å……å€¼" : "åœè»Šç¹³è²»");
            const amt = Math.floor(Math.random() * 800) + 50;
            const time = new Date().toLocaleTimeString();

            // ç”Ÿæˆæ—¥èªŒ
            const row = document.createElement('div');
            row.className = "feed-item";
            let colorClass = 'text-white';
            if(act === 'æ ¸éŠ·') colorClass = 'text-warning';
            else if(act === 'å……å€¼') colorClass = 'text-success';
            else colorClass = 'text-info'; // åœè»Šç­‰æœå‹™
            
            // æ¾³é–€ç‰¹åˆ¥æ¨™ç¤º
            let locDisplay = target;
            if (target.includes('æ¾³é–€')) locDisplay = `<span class="text-warning">ğŸ‡²ğŸ‡´ ${target}</span>`;
            else if (target.includes('é¦™æ¸¯')) locDisplay = `<span class="text-purple">ğŸ‡­ğŸ‡° ${target}</span>`;
            
            row.innerHTML = `<span class="text-secondary">${time} ${locDisplay}</span><span class="${colorClass}">${act} Â¥${amt}</span>`;
            list.prepend(row);
            if(list.children.length > 8) list.lastElementChild.remove();

            if (act === "æ ¸éŠ·") {
                total += amt;
                dashGmv.innerText = total.toLocaleString();
            }

            // è§¸ç™¼ç†±é»
            spawnPulse(target);

        }, 500); // æå‡åˆ·æ–°é »ç‡
    }

    function updateTime() { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); setTimeout(updateTime, 1000); }
</script>
</body>
</html>
